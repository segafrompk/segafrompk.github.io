(this["webpackJsonpethereum-vault-interview"]=this["webpackJsonpethereum-vault-interview"]||[]).push([[0],{75:function(e,t){},82:function(e,t){},91:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(5),s=n.n(a),r=n(19),o=n.n(r),c=n(9),d=n(8),i=n(18),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:"CHECK_BALANCE",payload:e}},u=n(50),p=n.n(u),j=n(6),b=function(e){var t=e.buttonText,n=void 0===t?"":t,a=e.buttonAction,s=e.customClass,r=void 0===s?"":s,o=e.refresh,c=void 0!==o&&o;return Object(j.jsx)("button",{className:r+(c?" refresh-button":""),onClick:function(){return a()},children:c?Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(j.jsx)("path",{d:"M20.944 12.979c-.489 4.509-4.306 8.021-8.944 8.021-2.698 0-5.112-1.194-6.763-3.075l1.245-1.633c1.283 1.645 3.276 2.708 5.518 2.708 3.526 0 6.444-2.624 6.923-6.021h-2.923l4-5.25 4 5.25h-3.056zm-15.864-1.979c.487-3.387 3.4-6 6.92-6 2.237 0 4.228 1.059 5.51 2.698l1.244-1.632c-1.65-1.876-4.061-3.066-6.754-3.066-4.632 0-8.443 3.501-8.941 8h-3.059l4 5.25 4-5.25h-2.92z"})}):n})},h=function(e){var t=e.address,n=Object(d.b)(),s=Object(d.c)((function(e){return e.balance}));Object(a.useEffect)((function(){n(l(t))}),[t,n]);return Object(j.jsxs)("div",{className:"display-balance",children:[c.a.utils.isAddress(t)&&Object(j.jsxs)("div",{className:"qr-address-container",children:[Object(j.jsx)(p.a,{size:200,value:t,includeMargin:!0,renderAs:"svg",className:"qr-code",bgColor:"none",fgColor:"white"}),Object(j.jsx)("span",{children:t})]}),""!==s&&Object(j.jsx)("span",{className:"balance-value",children:c.a.utils.formatUnits(s)+" ETH"}),Object(j.jsx)(b,{buttonAction:function(){n(l(t))},refresh:!0})]})};h.defaultProps={address:""};var v=h,f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:"CHECK_TRANSACTION_HISTORY",payload:e}},O=function(e){var t=e.transactionData;return Object(j.jsx)("div",{className:"transaction-history-item",children:t&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"transaction-history-item-ammount",children:c.a.utils.formatUnits(t.value._hex)}),Object(j.jsxs)("div",{className:"transaction-history-info",children:[Object(j.jsxs)("span",{className:"transaction-history-item-from",children:["From:"," ",Object(j.jsx)("br",{})," ",t.from]}),Object(j.jsxs)("span",{className:"transaction-history-item-to",children:["To:"," ",Object(j.jsx)("br",{})," ",t.to]})]})]})})};O.defaultProps={transactionData:{}};var m=O,A=function(e){var t=e.historyData,n=void 0===t?[]:t,a=[];return n&&n.length>0&&(a=n.map((function(e){return Object(j.jsx)(m,{transactionData:e},e.timestamp)})).reverse()),Object(j.jsx)("div",{className:"transaction-history-list",children:a})},y=function(e){var t=e.address,n=Object(d.b)();Object(a.useEffect)((function(){n(f(t))}),[t,n]);var s=Object(d.c)((function(e){return e.transactionHistory}));return Object(j.jsxs)("div",{className:"transaction-history",children:[Object(j.jsx)(A,{historyData:s}),Object(j.jsx)(b,{buttonAction:function(){n(f(t))},refresh:!0})]})};y.defaultProps={address:""};var T=y,x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i.b.error(e,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:"UPDATE_INPUT_EXTERNAL",payload:e}},N=function(e){var t=e.name,n=e.customClass,a=e.placeholder,s=Object(d.b)(),r=Object(d.c)((function(e){return e.updateInputFieldReducer[t]}));return Object(j.jsx)("input",{name:t,className:n+" input-field",placeholder:a,value:r,onChange:function(e){s(function(){return{type:"UPDATE_INPUT",payload:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}(e))}})},C=function(e){var t=e.savedAddresses,n=Object(d.b)(),a=Object(d.c)((function(e){return e.updateInputFieldReducer.addContactAddress})),s=Object(d.c)((function(e){return e.updateInputFieldReducer.addContactName}));return Object(j.jsxs)("div",{className:"add-address",children:[Object(j.jsx)("label",{htmlFor:"addContactName",children:"Enter name for address you want to save!"}),Object(j.jsx)(N,{name:"addContactName",customClass:"add-contact-name",placeholder:"Name"}),Object(j.jsx)("label",{htmlFor:"addContactAddress",children:"Enter address you want to save!"}),Object(j.jsx)(N,{name:"addContactAddress",customClass:"add-contact-address",placeholder:"Ethereum wallet address"}),Object(j.jsx)(b,{buttonAction:function(){var e;c.a.utils.isAddress(a)?(e=a,t.filter((function(t){return t.address===e})).length>0?x("Entered address was already saved!"):(n({type:"SAVE_ADDRESS",payload:{name:s,address:a}}),n(g({fieldToUpdate:"addContactName",fieldValue:""})),n(g({fieldToUpdate:"addContactAddress",fieldValue:""})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i.b.success(e,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}("Address successfully saved"))):x("Entered address is not valid!")},buttonText:"Save address!",customClass:"save-address-button"})]})},E=function(e){var t=e.savedAddressData,n=Object(d.b)();return Object(j.jsxs)("div",{className:"address-list-item",onClick:function(){n(g({fieldToUpdate:"depositToAddress",fieldValue:t.address})),document.querySelector(".deposit-amount.input-field").focus()},children:[Object(j.jsx)("span",{children:t.name+":"}),Object(j.jsx)("span",{children:t.address})]})};E.defaultProps={savedAddressData:{name:"",address:""}};var R=E,w=function(){var e=Object(d.c)((function(e){return e.saveAddressReducer})),t=[];return e&&e.length>0&&(t=e.map((function(e){return Object(j.jsx)(R,{savedAddressData:e},e.address)}))),Object(j.jsxs)("div",{className:"address-list-container",children:[Object(j.jsx)(C,{savedAddresses:e}),Object(j.jsx)("div",{className:"address-list",children:t.length>0&&t})]})},_=function(e){var t=e.wallet,n=Object(d.b)(),a=Object(d.c)((function(e){return e.updateInputFieldReducer.depositAmmount})),s=Object(d.c)((function(e){return e.updateInputFieldReducer.depositToAddress})),r=Object(d.c)((function(e){return e.balance}));return Object(j.jsxs)("div",{className:"make-transaction",children:[Object(j.jsx)("label",{htmlFor:"depositToAddress",children:"Please enter address you want to send ether to:"}),Object(j.jsx)(N,{name:"depositToAddress",customClass:"deposit-to-address",placeholder:"Ethereum wallet address"}),Object(j.jsx)("label",{htmlFor:"depositAmmount",children:"How much ether do you want to deposit?"}),Object(j.jsx)(N,{name:"depositAmmount",customClass:"deposit-amount",placeholder:"ETH ammount"}),Object(j.jsx)(b,{buttonText:"Deposit!",customClass:"deposit-button",buttonAction:function(){c.a.utils.isAddress(s)&&!isNaN(a)&&a>0&&a<r&&(n(function(e,t){return{type:"SEND_TRANSACTION",wallet:e,transactionData:t}}(t,{to:s,value:c.a.utils.parseUnits(a,"ether")})),n(g({fieldToUpdate:"depositToAddress",fieldValue:""})),n(g({fieldToUpdate:"depositAmmount",fieldValue:""})))}})]})};_.defaultProps={wallet:{}};var I=_,P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:"LOGIN",payload:e}},S=function(){var e=Object(d.c)((function(e){return e.wallet})),t=e.address,n=Object(d.b)();return Object(j.jsxs)("div",{className:"account-view",children:[Object(j.jsx)(b,{customClass:"logout",buttonAction:function(){window.localStorage.removeItem("ethereumPersonalKey"),n({type:"LOGOUT"})},buttonText:"Log out!"}),Object(j.jsx)(v,{address:t}),Object(j.jsx)(I,{wallet:e}),Object(j.jsx)(w,{}),Object(j.jsx)(T,{address:t})]})},U=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.updateInputFieldReducer.personalKeyInput})),n=window.localStorage.getItem("ethereumPersonalKey");return n?(e(P(n)),Object(j.jsx)("div",{children:"You are being logged in!"})):Object(j.jsxs)("div",{className:"login-view",children:[Object(j.jsx)("label",{htmlFor:"personalKeyInput",children:"Please insert your wallet`s personal key"}),Object(j.jsx)(N,{name:"personalKeyInput",customClass:"personal-key-input",placeholder:"Personal key"}),Object(j.jsx)(b,{buttonAction:function(){return function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.startsWith("0x")?t=66===n.length:64===n.length?(n="0x"+n,t=!0):t=!1,t?(window.localStorage.setItem("ethereumPersonalKey",n),e(P(n)),e(g({fieldToUpdate:"personalKeyInput",fieldValue:""}))):x("Personal key is not valid!")}(t)},buttonText:"Submit"})]})};var D=function(){var e=Object(d.c)((function(e){return e.wallet}));return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(i.a,{}),e.address&&c.a.utils.isAddress(e.address)&&Object(j.jsx)(S,{}),(!e.address||!c.a.utils.isAddress(e.address))&&Object(j.jsx)(U,{})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,94)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),r(e),o(e)}))},H=n(20),K=n(2),k=n.n(K),L=n(55),B=new c.a.providers.EtherscanProvider("rinkeby",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NETWORK:"rinkeby",REACT_APP_API_KEY:"INCND5R891ZFV73M2IAWAKPWWUF5ZHICF1"}).REACT_APP_API_KEYREACT_APP_API_KEY),V=function(e){i.b.error(e,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},W=function(e){if("string"==typeof e)try{return new c.a.Wallet(e,B)}catch(t){console.log(t)}else V("Invalid personal key")},Y=function(){var e=Object(L.a)(k.a.mark((function e(t,n){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.sendTransaction(n);case 3:return a=e.sent,e.next=6,a.wait();case 6:return e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"LOGIN":return null!==(e=W(n.payload))&&void 0!==e?e:t;case"LOGOUT":return{};default:return t}},G=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"RETURN_BALANCE":return null!==(e=n.payload._hex)&&void 0!==e?e:t;default:return t}},q=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"RETURN_TRANSACTION_HISTORY":return null!==(e=n.payload)&&void 0!==e?e:t;default:return t}},z=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"RETURN_TRANSACTION_RECEIPT":return null!==(e=n.payload)&&void 0!==e?e:t;default:return t}},J=n(28),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_ADDRESS":return[].concat(Object(J.a)(e),[t.payload]);default:return e}},Z=n(27),Q=n(17),$={personalKeyInput:"",addContactName:"",addContactAddress:"",depositToAddress:"",depositAmmount:""},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_INPUT":return Object(Q.a)(Object(Q.a)({},e),{},Object(Z.a)({},t.payload.target.name,t.payload.target.value));case"UPDATE_INPUT_EXTERNAL":return Object(Q.a)(Object(Q.a)({},e),{},Object(Z.a)({},t.payload.fieldToUpdate,t.payload.fieldValue));default:return e}},te=Object(H.combineReducers)({wallet:M,balance:G,transactionHistory:q,sendTransactionReducer:z,saveAddressReducer:X,updateInputFieldReducer:ee}),ne=n(56),ae=(n(91),Object(H.applyMiddleware)((function(e){return function(t){return function(n){return"CHECK_BALANCE"===n.type&&function(e){if(c.a.utils.isAddress(e))try{return B.getBalance(e)}catch(t){console.log(t)}else V("Invalid wallet address")}(n.payload).then((function(t){e.dispatch({type:"RETURN_BALANCE",payload:t})})),t(n)}}}),(function(e){return function(t){return function(n){return"CHECK_TRANSACTION_HISTORY"===n.type&&function(e){if(c.a.utils.isAddress(e))try{return B.getHistory(e)}catch(t){console.log(t)}else V("Invalid wallet address")}(n.payload).then((function(t){e.dispatch({type:"RETURN_TRANSACTION_HISTORY",payload:t})})),t(n)}}}),(function(e){return function(t){return function(n){return"SEND_TRANSACTION"===n.type&&Y(n.wallet,n.transactionData).then((function(t){e.dispatch({type:"RETURN_TRANSACTION_RECEIPT",payload:t})})),t(n)}}}))),se=Object(H.createStore)(te,Object(ne.composeWithDevTools)(ae));o.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(d.a,{store:se,children:Object(j.jsx)(D,{})})}),document.getElementById("root")),F()}},[[92,1,2]]]);
//# sourceMappingURL=main.fd7fdcfd.chunk.js.map